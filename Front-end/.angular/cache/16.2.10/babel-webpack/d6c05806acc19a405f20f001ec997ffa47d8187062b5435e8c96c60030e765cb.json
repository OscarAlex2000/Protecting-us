{"ast":null,"code":"import { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { switchMap } from 'rxjs/operators';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/dashboard.service\";\nimport * as i4 from \"src/app/auth/services/auth.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../shared/menu/menu.component\";\nfunction UserComponent_button_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function UserComponent_button_39_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.returnUsers());\n    });\n    i0.ɵɵtext(1, \"Regresar\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let UserComponent = /*#__PURE__*/(() => {\n  class UserComponent {\n    get usuario() {\n      return this.dashService.usuario;\n    }\n    constructor(fb, router, activatedRoute, dashService, authService) {\n      this.fb = fb;\n      this.router = router;\n      this.activatedRoute = activatedRoute;\n      this.dashService = dashService;\n      this.authService = authService;\n      this.emailEdit = true; // Can you edit email?\n      this.returnButton = true;\n      this.active = true;\n      this.root = false;\n      this.id = localStorage.getItem('_id');\n      this.miFormulario = this.fb.group({\n        name: [, [Validators.required]],\n        first_lastname: [, [Validators.required]],\n        second_lastname: [, [Validators.required]],\n        email: [, [Validators.required, Validators.email]]\n      });\n    }\n    ngOnInit() {\n      if (!this.router.url.includes('user')) {\n        this.returnButton = false;\n        this.activatedRoute.params.pipe(switchMap(({\n          id\n        }) => this.dashService.getUser(id))).subscribe(user => console.log(user));\n        return;\n      }\n      this.activatedRoute.params.pipe(switchMap(({\n        id\n      }) => this.dashService.getUser(id))).subscribe(user => console.log(user));\n    }\n    updateUser() {\n      let user = {\n        name: '',\n        first_lastname: '',\n        second_lastname: '',\n        email: '',\n        active: true\n      };\n      const {\n        name,\n        first_lastname,\n        second_lastname,\n        email\n      } = this.miFormulario.value;\n      // console.log(this.miFormulario);\n      // console.log(this.miFormulario.controls.name.touched)\n      // return;\n      user.name = this.miFormulario.controls.name.touched ? name : this.usuario.name;\n      user.first_lastname = this.miFormulario.controls.first_lastname.touched ? first_lastname : this.usuario.first_lastname;\n      user.second_lastname = this.miFormulario.controls.second_lastname.touched ? second_lastname : this.usuario.second_lastname;\n      user.email = this.miFormulario.controls.email.touched ? this.usuario.email : this.usuario.email;\n      if (user.name === \"\" || user.name == undefined) {\n        Swal.fire({\n          position: 'center',\n          icon: 'error',\n          title: 'Nombre vacio',\n          text: \"El nombre no puede estar vacio\",\n          showConfirmButton: false,\n          timer: 1500\n        });\n        return;\n      }\n      this.dashService.updateUser(this.usuario._id, user.name, user.first_lastname, user.second_lastname, this.active, this.root).subscribe(resp => {\n        if (resp.ok === true) {\n          Swal.fire({\n            position: 'center',\n            icon: 'success',\n            title: 'Datos actualizados correctamente!',\n            text: resp.msg_es,\n            showConfirmButton: false,\n            timer: 1500\n          });\n          // Swal.fire('Datos actualizados correctamente!',resp.msg_es,'success');\n        } else {\n          Swal.fire({\n            position: 'center',\n            icon: 'error',\n            title: 'Error al guardar los datos',\n            text: resp.msg_es,\n            showConfirmButton: false,\n            timer: 1500\n          });\n          // Swal.fire('Error al guardar los datos', resp.msg_es, 'error');\n        }\n      });\n    }\n\n    returnUsers() {\n      this.router.navigateByUrl('/dashboard/users');\n    }\n    changeActive(isChecked) {\n      this.active = isChecked.target.checked;\n      if (this.active) {\n        Swal.fire({\n          position: 'center',\n          icon: 'success',\n          title: 'Usuario',\n          text: 'Habilitado correctamente!',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      } else {\n        Swal.fire({\n          position: 'center',\n          icon: 'warning',\n          title: 'Usuario',\n          text: 'Deshabilitado!',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      }\n    }\n    changeRoot(isChecked) {\n      this.root = isChecked.target.checked;\n      if (this.root) {\n        Swal.fire({\n          position: 'center',\n          icon: 'success',\n          title: 'Usuario',\n          text: 'Ahora es ADMINISTRADOR!',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      } else {\n        Swal.fire({\n          position: 'center',\n          icon: 'warning',\n          title: 'Usuario',\n          text: 'Ya no es Administrador!',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      }\n    }\n    static #_ = this.ɵfac = function UserComponent_Factory(t) {\n      return new (t || UserComponent)(i0.ɵɵdirectiveInject(i1.UntypedFormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.DashService), i0.ɵɵdirectiveInject(i4.AuthService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserComponent,\n      selectors: [[\"app-user\"]],\n      decls: 43,\n      vars: 13,\n      consts: [[\"autocomplete\", \"off\", 1, \"login100-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-12\"], [1, \"login100-form-title\", \"p-b-45\"], [1, \"row\", \"mb-2\", \"ml-2\"], [1, \"col-md-11\", \"col-sm-11\", \"col-11\", \"align-self-start\"], [1, \"form-check\", \"form-switch\"], [\"type\", \"checkbox\", 1, \"form-check-input\", 2, \"width\", \"50px\", \"height\", \"25px\", 3, \"checked\", \"hidden\", \"disabled\", \"change\"], [1, \"col-md-1\", \"col-sm-1\", \"col-1\", \"align-self-end\"], [1, \"col\"], [1, \"input-group\", \"wrap-input100\", \"m-b-23\", \"mb-3\"], [\"id\", \"basic-addon1\", 1, \"input-group-text\", 2, \"background-color\", \"#ff971f\"], [\"type\", \"text\", \"formControlName\", \"name\", \"name\", \"user.name\", \"placeholder\", \"Nombre\", \"ngDefaultControl\", \"\", \"aria-describedby\", \"basic-addon1\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"formControlName\", \"first_lastname\", \"placeholder\", \"Primer apellido\", \"ngDefaultControl\", \"\", \"aria-describedby\", \"basic-addon1\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"formControlName\", \"second_lastname\", \"placeholder\", \"Segundo apellido\", \"ngDefaultControl\", \"\", \"aria-describedby\", \"basic-addon1\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"formControlName\", \"email\", \"placeholder\", \"Correo Electr\\u00F3nico\", \"ngDefaultControl\", \"\", \"aria-describedby\", \"basic-addon1\", 1, \"form-control\", 3, \"ngModel\", \"readonly\", \"ngModelChange\"], [1, \"row\", \"mt-5\"], [\"type\", \"button\", \"class\", \"btn btn-secondary\", 3, \"click\", 4, \"ngIf\"], [\"align\", \"right\", 1, \"col\"], [\"type\", \"button\", \"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-bottom-right\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"]],\n      template: function UserComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-menu\");\n          i0.ɵɵelementStart(1, \"form\", 0);\n          i0.ɵɵlistener(\"ngSubmit\", function UserComponent_Template_form_ngSubmit_1_listener() {\n            return ctx.updateUser();\n          });\n          i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"span\", 4);\n          i0.ɵɵtext(6, \"Usuario\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"div\", 7)(10, \"input\", 8);\n          i0.ɵɵlistener(\"change\", function UserComponent_Template_input_change_10_listener($event) {\n            return ctx.changeRoot($event);\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(11, \"div\", 9)(12, \"div\", 7)(13, \"input\", 8);\n          i0.ɵɵlistener(\"change\", function UserComponent_Template_input_change_13_listener($event) {\n            return ctx.changeActive($event);\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(14, \"div\", 2)(15, \"div\", 10)(16, \"div\", 11)(17, \"span\", 12);\n          i0.ɵɵtext(18, \"Nombre\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"input\", 13);\n          i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_19_listener($event) {\n            return ctx.usuario.name = $event;\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(20, \"div\", 2)(21, \"div\", 10)(22, \"div\", 11)(23, \"span\", 12);\n          i0.ɵɵtext(24, \"A. Paterno\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"input\", 14);\n          i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_25_listener($event) {\n            return ctx.usuario.first_lastname = $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(26, \"div\", 10)(27, \"div\", 11)(28, \"span\", 12);\n          i0.ɵɵtext(29, \"A. Materno\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"input\", 15);\n          i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_30_listener($event) {\n            return ctx.usuario.second_lastname = $event;\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(31, \"div\", 2)(32, \"div\", 10)(33, \"div\", 11)(34, \"span\", 12);\n          i0.ɵɵtext(35, \"Correo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"input\", 16);\n          i0.ɵɵlistener(\"ngModelChange\", function UserComponent_Template_input_ngModelChange_36_listener($event) {\n            return ctx.usuario.email = $event;\n          });\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(37, \"div\", 17)(38, \"div\", 10);\n          i0.ɵɵtemplate(39, UserComponent_button_39_Template, 2, 0, \"button\", 18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(40, \"div\", 19)(41, \"button\", 20);\n          i0.ɵɵtext(42, \"Guardar\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"formGroup\", ctx.miFormulario);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"checked\", ctx.usuario.root)(\"hidden\", !ctx.returnButton && !ctx.usuario.root)(\"disabled\", !ctx.returnButton && !ctx.usuario.root);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"checked\", ctx.usuario.active)(\"hidden\", !ctx.returnButton && !ctx.usuario.root)(\"disabled\", !ctx.returnButton || ctx.usuario._id == ctx.id);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.usuario.name);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.usuario.first_lastname);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.usuario.second_lastname);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.usuario.email)(\"readonly\", ctx.emailEdit);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.returnButton);\n        }\n      },\n      dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.MenuComponent],\n      encapsulation: 2\n    });\n  }\n  return UserComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(UserComponent, [{\n    type: Component,\n    args: [{\n      selector: 'app-user',\n      template: \"<app-menu></app-menu>\\n<form class=\\\"login100-form\\\" \\n    autocomplete=\\\"off\\\"\\n    [formGroup]=\\\"miFormulario\\\"\\n    (ngSubmit)=\\\"updateUser()\\\">\\n    <div class=\\\"container-fluid\\\">\\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-12\\\">\\n                <span class=\\\"login100-form-title p-b-45\\\">Usuario</span>\\n            </div>\\n        </div>\\n        <div class=\\\"row mb-2 ml-2\\\">\\n            <div class=\\\"col-md-11 col-sm-11 col-11 align-self-start\\\">\\n                <div class=\\\"form-check form-switch\\\">\\n                    <input type=\\\"checkbox\\\" class=\\\"form-check-input\\\" [checked]=\\\"usuario.root\\\" [hidden]=\\\"!returnButton && !usuario.root\\\" [disabled]=\\\"!returnButton && !usuario.root\\\" (change)=\\\"changeRoot( $event )\\\" style=\\\"width: 50px; height: 25px;\\\">\\n                </div>\\n            </div>\\n            <div class=\\\"col-md-1 col-sm-1 col-1 align-self-end\\\">\\n                <div class=\\\"form-check form-switch\\\">\\n                    <input type=\\\"checkbox\\\" class=\\\"form-check-input\\\" [checked]=\\\"usuario.active\\\" [hidden]=\\\"!returnButton && !usuario.root\\\"  [disabled]=\\\"!returnButton || usuario._id == id\\\" (change)=\\\"changeActive( $event )\\\" style=\\\"width: 50px; height: 25px;\\\">\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"row\\\">\\n            <div class=\\\"col\\\">\\n                <div class=\\\"input-group wrap-input100 m-b-23 mb-3\\\">\\n                    <span class=\\\"input-group-text\\\" id=\\\"basic-addon1\\\" style=\\\"background-color: #ff971f\\\">Nombre</span>\\n                    <input class=\\\"form-control\\\"\\n                        type=\\\"text\\\" \\n                        formControlName=\\\"name\\\"\\n                        name=\\\"user.name\\\"\\n                        placeholder=\\\"Nombre\\\"\\n                        ngDefaultControl\\n                        [(ngModel)]=\\\"usuario.name\\\"\\n                        aria-describedby=\\\"basic-addon1\\\">\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"row\\\">\\n            <div class=\\\"col\\\">\\n                <div class=\\\"input-group wrap-input100 m-b-23 mb-3\\\">\\n                    <span class=\\\"input-group-text\\\" id=\\\"basic-addon1\\\" style=\\\"background-color: #ff971f\\\">A. Paterno</span>\\n                    <input class=\\\"form-control\\\"\\n                        type=\\\"text\\\" \\n                        formControlName=\\\"first_lastname\\\"\\n                        placeholder=\\\"Primer apellido\\\"\\n                        ngDefaultControl\\n                        [(ngModel)]=\\\"usuario.first_lastname\\\"\\n                        aria-describedby=\\\"basic-addon1\\\">\\n                </div>\\n            </div>\\n            <div class=\\\"col\\\">\\n                <div class=\\\"input-group wrap-input100 m-b-23 mb-3\\\">\\n                    <span class=\\\"input-group-text\\\" id=\\\"basic-addon1\\\" style=\\\"background-color: #ff971f\\\">A. Materno</span>\\n                    <input class=\\\"form-control\\\"\\n                        type=\\\"text\\\" \\n                        formControlName=\\\"second_lastname\\\"\\n                        placeholder=\\\"Segundo apellido\\\"\\n                        ngDefaultControl\\n                        [(ngModel)]=\\\"usuario.second_lastname\\\"\\n                        aria-describedby=\\\"basic-addon1\\\">\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"row\\\">\\n            <div class=\\\"col\\\">\\n                <div class=\\\"input-group wrap-input100 m-b-23 mb-3\\\">\\n                    <span class=\\\"input-group-text\\\" id=\\\"basic-addon1\\\" style=\\\"background-color: #ff971f\\\">Correo</span>\\n                    <input class=\\\"form-control\\\"\\n                        type=\\\"text\\\" \\n                        formControlName=\\\"email\\\"\\n                        placeholder=\\\"Correo Electr\\u00F3nico\\\"\\n                        ngDefaultControl\\n                        [(ngModel)]=\\\"usuario.email\\\"\\n                        aria-describedby=\\\"basic-addon1\\\"\\n                        [readonly]=\\\"emailEdit\\\" >\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"row mt-5\\\">\\n            <div class=\\\"col\\\">\\n                <button type=\\\"button\\\" \\n                        class=\\\"btn btn-secondary\\\" \\n                        *ngIf=\\\"returnButton\\\"\\n                        (click)=\\\"returnUsers()\\\">Regresar</button>\\n            </div>\\n            <div class=\\\"col\\\" align=\\\"right\\\">\\n                <button class=\\\"btn btn-primary btn-bottom-right\\\" \\n                        type=\\\"button\\\"\\n                        type=\\\"submit\\\" >Guardar</button>\\n                    <!-- [disabled]=\\\"miFormulario.invalid\\\" -->\\n            </div>\\n        </div>\\n    </div>\\n</form>\\n\\n<!-- {{ usuario | json }} -->\\n<!-- {{ user_now | json }} -->\"\n    }]\n  }], () => [{\n    type: i1.UntypedFormBuilder\n  }, {\n    type: i2.Router\n  }, {\n    type: i2.ActivatedRoute\n  }, {\n    type: i3.DashService\n  }, {\n    type: i4.AuthService\n  }], null);\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassDebugInfo(UserComponent, {\n    className: \"UserComponent\"\n  });\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}