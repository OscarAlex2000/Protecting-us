{"ast":null,"code":"import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/dashboard.service\";\nimport * as i3 from \"src/app/auth/services/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../shared/menu/menu.component\";\nfunction UsersComponent_div_15_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" Se muestan \", ctx_r2.usuarios.users.length, \" de \", ctx_r2.usuarios.total, \" \");\n  }\n}\nfunction UsersComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, UsersComponent_div_15_span_1_Template, 2, 2, \"span\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.usuarios.total > 0);\n  }\n}\nfunction UsersComponent_div_17_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"No se encontraron resultados\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersComponent_div_17_table_2_tr_16_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\")(1, \"span\", 25);\n    i0.ɵɵtext(2, \"Activo\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UsersComponent_div_17_table_2_tr_16_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\")(1, \"span\", 26);\n    i0.ɵɵtext(2, \"Inactivo\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UsersComponent_div_17_table_2_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, UsersComponent_div_17_table_2_tr_16_td_9_Template, 3, 0, \"td\", 14)(10, UsersComponent_div_17_table_2_tr_16_td_10_Template, 3, 0, \"td\", 14);\n    i0.ɵɵelementStart(11, \"td\")(12, \"a\", 21);\n    i0.ɵɵelement(13, \"i\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\")(15, \"a\", 23);\n    i0.ɵɵlistener(\"click\", function UsersComponent_div_17_table_2_tr_16_Template_a_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const user_aux_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.deleteUser(user_aux_r6._id));\n    });\n    i0.ɵɵelement(16, \"i\", 24);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_aux_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_aux_r6.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_aux_r6.first_surname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_aux_r6.second_surname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_aux_r6.user_name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_aux_r6.active);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !user_aux_r6.active);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/dashboard/user/\", user_aux_r6._id, \"\");\n  }\n}\nfunction UsersComponent_div_17_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 16)(1, \"thead\", 17)(2, \"tr\")(3, \"th\", 18);\n    i0.ɵɵtext(4, \"Nombre(s)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 18);\n    i0.ɵɵtext(6, \"Primer Apellido\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 18);\n    i0.ɵɵtext(8, \"Segundo Apellido\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 18);\n    i0.ɵɵtext(10, \"Correo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 18);\n    i0.ɵɵtext(12, \"Estado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"th\", 18)(14, \"th\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"tbody\", 19);\n    i0.ɵɵtemplate(16, UsersComponent_div_17_table_2_tr_16_Template, 17, 7, \"tr\", 20);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.usuarios.users);\n  }\n}\nfunction UsersComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, UsersComponent_div_17_span_1_Template, 2, 0, \"span\", 14)(2, UsersComponent_div_17_table_2_Template, 17, 1, \"table\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.usuarios.users.length == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.usuarios.users.length > 0);\n  }\n}\nexport let UsersComponent = /*#__PURE__*/(() => {\n  class UsersComponent {\n    get usuario() {\n      localStorage.setItem('_id', this.authService.usuario._id);\n      return this.authService.usuario;\n    }\n    get usuarios() {\n      return this.dashService.usuarios;\n    }\n    get totalUsuarios() {\n      return this.dashService.totalUsuarios;\n    }\n    constructor(router, dashService, authService) {\n      this.router = router;\n      this.dashService = dashService;\n      this.authService = authService;\n      this.getInfo = false;\n      this.search = '';\n      this.update = new EventEmitter();\n    }\n    ngOnInit() {\n      if (!this.authService.usuario.root) {\n        Swal.fire({\n          position: 'center',\n          icon: 'error',\n          title: 'Tu usuario no puede acceder a este apartado!',\n          showConfirmButton: false,\n          timer: 1500\n        });\n        // this.router.navigateByUrl('/auth');\n      }\n\n      this.getUsers('');\n    }\n    getUsers(search = '') {\n      search.target === undefined || search.target === null ? search = '' : search = search.target.value;\n      this.dashService.getUsers(search).subscribe(resp => {\n        if (resp === true) {\n          this.getInfo = true;\n        } else {\n          Swal.fire('ERROR', 'Error al obtener los usuarios', 'error');\n        }\n      });\n    }\n    deleteUser(id) {\n      if (id === this.usuario._id) {\n        Swal.fire('ERROR', 'No se puede eliminar un usuario activo', 'error');\n      } else {\n        Swal.fire({\n          title: '¿Estas seguro?',\n          text: \"¡No se podrá revertir el proceso!\",\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonColor: '#d33',\n          cancelButtonColor: '#7D7F7D',\n          confirmButtonText: 'Eliminar',\n          cancelButtonText: 'Cancelar'\n        }).then(result => {\n          if (result.isConfirmed) {\n            this.dashService.deleteUser(id).subscribe(resp => {\n              if (resp === true) {\n                Swal.fire({\n                  position: 'center',\n                  icon: 'success',\n                  title: 'Usuario Eliminado',\n                  showConfirmButton: false,\n                  timer: 1500\n                });\n                this.getUsers();\n              } else {\n                Swal.fire('ERROR', 'No se pudo eliminar usuario', 'error');\n              }\n            });\n          }\n        });\n      }\n    }\n    static #_ = this.ɵfac = function UsersComponent_Factory(t) {\n      return new (t || UsersComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.DashService), i0.ɵɵdirectiveInject(i3.AuthService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UsersComponent,\n      selectors: [[\"app-users\"]],\n      inputs: {\n        search: \"search\"\n      },\n      outputs: {\n        update: \"ngModelChange\"\n      },\n      decls: 18,\n      vars: 2,\n      consts: [[1, \"container-fluid\"], [1, \"row\", \"mt-3\", \"mb-3\"], [1, \"col\"], [1, \"text-center\", \"p-3\"], [1, \"row\"], [1, \"input-group\", \"mb-3\"], [1, \"input-group-text\"], [\"type\", \"text\", \"placeholder\", \"Buscar...\", 1, \"form-control\", 3, \"keyup\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-refresh\"], [1, \"row\", \"mb-3\"], [\"class\", \"col text-end\", 4, \"ngIf\"], [\"class\", \"col\", 4, \"ngIf\"], [1, \"col\", \"text-end\"], [4, \"ngIf\"], [\"class\", \"table table-hover table-striped\", 4, \"ngIf\"], [1, \"table\", \"table-hover\", \"table-striped\"], [1, \"table-warning\"], [\"scope\", \"col\"], [1, \"table-group-divider\"], [4, \"ngFor\", \"ngForOf\"], [3, \"routerLink\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-user-circle\", 2, \"font-size\", \"25px\", \"color\", \"#0b6ae6\"], [3, \"click\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-trash\", 2, \"font-size\", \"25px\", \"cursor\", \"pointer\", \"color\", \"red\"], [1, \"text-success\"], [1, \"text-danger\"]],\n      template: function UsersComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-menu\");\n          i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"h2\", 3);\n          i0.ɵɵtext(5, \"Usuarios\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\", 2)(8, \"div\", 5)(9, \"span\", 6);\n          i0.ɵɵtext(10, \"Buscar\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"input\", 7);\n          i0.ɵɵlistener(\"keyup\", function UsersComponent_Template_input_keyup_11_listener($event) {\n            return ctx.getUsers($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function UsersComponent_Template_button_click_12_listener() {\n            return ctx.getUsers();\n          });\n          i0.ɵɵelement(13, \"i\", 9);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(14, \"div\", 10);\n          i0.ɵɵtemplate(15, UsersComponent_div_15_Template, 2, 1, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 4);\n          i0.ɵɵtemplate(17, UsersComponent_div_17_Template, 3, 2, \"div\", 12);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"ngIf\", ctx.getInfo);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.getInfo);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i1.RouterLink, i5.MenuComponent],\n      encapsulation: 2\n    });\n  }\n  return UsersComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(UsersComponent, [{\n    type: Component,\n    args: [{\n      selector: 'app-users',\n      template: \"<app-menu></app-menu>\\n<div class=\\\"container-fluid\\\">\\n    <div class=\\\"row mt-3 mb-3\\\">\\n        <div class=\\\"col\\\">\\n            <h2 class=\\\"text-center p-3\\\">Usuarios</h2>\\n        </div>\\n    </div>\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col\\\">\\n            <div class=\\\"input-group mb-3\\\">\\n                <span class=\\\"input-group-text\\\">Buscar</span>    \\n                <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Buscar...\\\" (keyup)=\\\"getUsers($event);\\\" >\\n                <button class=\\\"btn btn-outline-secondary\\\" type=\\\"button\\\" (click)=\\\"getUsers()\\\"><i class=\\\"fa fa-refresh\\\" aria-hidden=\\\"true\\\"></i></button>\\n                <!-- <button class=\\\"btn btn-outline-secondary\\\" type=\\\"button\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i></button> -->\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"row mb-3\\\">\\n        <div class=\\\"col text-end\\\" *ngIf=\\\"getInfo\\\">\\n            <span *ngIf=\\\"usuarios.total > 0\\\"> Se muestan {{ usuarios.users.length }} de {{ usuarios.total }} </span>\\n        </div>\\n    </div>\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col\\\" *ngIf=\\\"getInfo\\\">\\n            <span *ngIf=\\\"usuarios.users.length == 0\\\">No se encontraron resultados</span>\\n            <table class=\\\"table table-hover table-striped\\\" *ngIf=\\\"usuarios.users.length > 0\\\">\\n                <thead class=\\\"table-warning\\\">\\n                    <tr>\\n                        <th scope=\\\"col\\\">Nombre(s)</th>\\n                        <th scope=\\\"col\\\">Primer Apellido</th>\\n                        <th scope=\\\"col\\\">Segundo Apellido</th>\\n                        <th scope=\\\"col\\\">Correo</th>\\n                        <th scope=\\\"col\\\">Estado</th>\\n                        <th scope=\\\"col\\\"></th>\\n                        <th scope=\\\"col\\\"></th>\\n                    </tr>\\n                </thead>\\n                <tbody class=\\\"table-group-divider\\\">\\n                    <tr *ngFor=\\\"let user_aux of usuarios.users\\\">\\n                        <td>{{ user_aux.name }}</td>\\n                        <td>{{ user_aux.first_surname }}</td>\\n                        <td>{{ user_aux.second_surname }}</td>\\n                        <td>{{ user_aux.user_name }}</td>\\n                        <td *ngIf=\\\"user_aux.active\\\"><span class=\\\"text-success\\\">Activo</span></td>\\n                        <td *ngIf=\\\"!user_aux.active\\\"><span class=\\\"text-danger\\\">Inactivo</span></td>\\n                        <td><a routerLink=\\\"/dashboard/user/{{user_aux._id}}\\\"><i class=\\\"fa fa-user-circle\\\" aria-hidden=\\\"true\\\" style=\\\"font-size: 25px; color:#0b6ae6\\\"></i></a></td>\\n                        <td><a (click)=\\\"deleteUser(user_aux._id)\\\"><i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\" style=\\\"font-size: 25px; cursor: pointer; color: red;\\\"></i></a></td>\\n                    </tr>\\n                </tbody>\\n            </table>\\n        </div>\\n    </div>\\n</div>\\n\"\n    }]\n  }], () => [{\n    type: i1.Router\n  }, {\n    type: i2.DashService\n  }, {\n    type: i3.AuthService\n  }], {\n    search: [{\n      type: Input\n    }],\n    update: [{\n      type: Output,\n      args: ['ngModelChange']\n    }]\n  });\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassDebugInfo(UsersComponent, {\n    className: \"UsersComponent\"\n  });\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}